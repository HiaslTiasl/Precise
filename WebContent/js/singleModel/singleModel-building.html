<div class="panels">
	<aside id="config-operations">
		<div ng-if="!$ctrl.model.data.configInfo.empty && $ctrl.model.data.configInfo.editable">
			<button class="btn btn-danger" ng-click="$ctrl.clearConfig()">Clear configuration</button>
		</div>
		<div ng-if="$ctrl.model.data.configInfo.editable">
			<h3>Choose</h3>
			<form class="form">
				<div class="form-group">
					<label for="model-config" class="control-label">Use config of existing model:</label>
					<select
						id="model-config"
						class="form-control"
						ng-model="$ctrl.selectedModel"
						ng-options="m as m.name for m in $ctrl.selectableModels"
						ng-change="$ctrl.modelChanged()">
						<option value="">-- Select a model --</option>
					</select>
				</div>
				<div class="form-group">
					<label for="file-config" class="control-label">Import from file:</label>
					<div id="file-config" class="input-group">
						<span class="input-group-btn">			
							<button class="btn btn-default" ng-model="$ctrl.file" ngf-select="$ctrl.selectFile($ctrl.file)">Browse</button>
						</span>
						<input type="text" class="form-control" ng-model="$ctrl.file.name" readonly/>
					</div>
				</div>
				<div class="text-right">
					<button
						class="btn btn-primary"
						ng-click="$ctrl.sendConfig()"
						ng-disabled="!$ctrl.selectedModel && !$ctrl.file">Done</button>
					<button class="btn btn-default" ng-click="$ctrl.cancel()">Cancel</button>
				</div>
			</form>
		</div>
	</aside>
	<div id="config-preview">
		<h3>Preview</h3>
		<form class="form-horizontal">
			<div class="form-group">
				<label for="phase" class="col-sm-2 control-label">Phase:</label>
				<div id="model-config" class="col-sm-10">
					<select
						class="form-control"
						ng-model="$ctrl.phase"
						ng-options="p as p.name for p in $ctrl.config.phases"
						ng-disabled="!$ctrl.config.phases">
						<option value="">-- Select a phase --</option>
					</select>
				</div>
			</div>
			<div class="form-group">
				<label for="attributes" class="col-sm-2 control-label">Attributes:</label>
				<div class="col-sm-10">
					<p id="phase" class="form-control-static">
						{{$ctrl.phase.attributes | join:', '}}
					</p>
				</div>
			</div>
			<div class="form-group">
				<label for="building" class="col-sm-2 control-label">Building:</label>
				<div class="col-sm-10">
					<p id="building" class="form-control-static">
						<json-formatter ng-show="$ctrl.phase" json="$ctrl.phase.valueTree" open="3"></json-formatter>
					</p>
				</div>
			</div>
		</form>
	</div>
</div>
